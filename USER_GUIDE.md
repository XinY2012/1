# é…’åº—ç®¡ç†ç³»ç»Ÿ - ä½¿ç”¨è¯´æ˜

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨åç«¯æœåŠ¡

æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ server ç›®å½•ï¼š
```bash
cd server
npm start
```

çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯è¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼š
```
åç«¯æœåŠ¡è¿è¡Œåœ¨ http://localhost:3003
```

### 2. å¯åŠ¨å‰ç«¯æœåŠ¡

æ‰“å¼€æ–°ç»ˆç«¯ï¼Œè¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼š
```bash
npm run dev
```

çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯è¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼š
```
VITE v5.0.0  ready in xxx ms

âœ  Local:   http://localhost:3000/
```

### 3. è®¿é—®ç³»ç»Ÿ

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š
```
http://localhost:3000
```

---

## ğŸ‘¤ æµ‹è¯•è´¦å·

### å•†æˆ·è´¦å·
- ç”¨æˆ·åï¼š`merchant`
- å¯†ç ï¼š`123456`
- æƒé™ï¼šä¸Šä¼ ã€ç¼–è¾‘é…’åº—ä¿¡æ¯

### ç®¡ç†å‘˜è´¦å·
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`123456`
- æƒé™ï¼šå®¡æ ¸ã€å‘å¸ƒé…’åº—ä¿¡æ¯

---

## ğŸ“‹ åŠŸèƒ½è¯´æ˜

### ç”¨æˆ·ç«¯åŠŸèƒ½

#### 1. é…’åº—æœç´¢
- æ”¯æŒæŒ‰åŸå¸‚ç­›é€‰
- æ”¯æŒæŒ‰æ˜Ÿçº§ç­›é€‰
- æ”¯æŒæŒ‰ä»·æ ¼æ’åº
- æ”¯æŒå…³é”®è¯æœç´¢

#### 2. é…’åº—è¯¦æƒ…
- æŸ¥çœ‹é…’åº—å®Œæ•´ä¿¡æ¯
- æŸ¥çœ‹æˆ¿å‹åˆ—è¡¨
- æŸ¥çœ‹é™„è¿‘ä¿¡æ¯ï¼ˆæ™¯ç‚¹/äº¤é€š/å•†åœºï¼‰
- åœ¨çº¿é¢„è®¢

#### 3. å®šä½åŠŸèƒ½
- è‡ªåŠ¨è·å–å½“å‰åŸå¸‚
- æ”¯æŒæ‰‹åŠ¨é€‰æ‹©åŸå¸‚

---

### å•†æˆ·ç«¯åŠŸèƒ½

#### 1. é…’åº—ç®¡ç†
- æŸ¥çœ‹é…’åº—åˆ—è¡¨
- åˆ›å»ºæ–°é…’åº—
- ç¼–è¾‘é…’åº—ä¿¡æ¯
- åˆ é™¤é…’åº—

#### 2. é…’åº—å½•å…¥
- å¡«å†™é…’åº—åŸºç¡€ä¿¡æ¯
- é€‰æ‹©é™„è¿‘ä¿¡æ¯
- æ·»åŠ æˆ¿å‹ä¿¡æ¯
- è®¾ç½®ä»·æ ¼å’Œä¼˜æƒ 

#### 3. å®¡æ ¸æµç¨‹
- ä¿å­˜ä¸ºè‰ç¨¿
- æäº¤å®¡æ ¸
- æŸ¥çœ‹å®¡æ ¸çŠ¶æ€
- ä¿®æ”¹è¢«æ‹’ç»çš„é…’åº—

---

### ç®¡ç†å‘˜ç«¯åŠŸèƒ½

#### 1. é…’åº—å®¡æ ¸
- æŸ¥çœ‹å¾…å®¡æ ¸é…’åº—
- å®¡æ ¸é€šè¿‡
- å®¡æ ¸æ‹’ç»ï¼ˆå¡«å†™åŸå› ï¼‰
- ä¸‹çº¿é…’åº—
- æ¢å¤é…’åº—

#### 2. é…’åº—ç®¡ç†
- æŸ¥çœ‹æ‰€æœ‰é…’åº—
- æŒ‰çŠ¶æ€ç­›é€‰
- æŸ¥çœ‹é…’åº—è¯¦æƒ…

---

## ğŸ”§ API æ¥å£è¯´æ˜

### åŸºç¡€ä¿¡æ¯
- **åç«¯åœ°å€ï¼š** http://localhost:3003
- **API å‰ç¼€ï¼š** /api
- **æ•°æ®æ ¼å¼ï¼š** JSON

### ç”¨æˆ·è®¤è¯æ¥å£

#### ç™»å½•
```
POST /api/user/login
Content-Type: application/json

{
  "username": "merchant",
  "password": "123456"
}

å“åº”ï¼š
{
  "success": true,
  "data": {
    "id": "user_1",
    "username": "merchant",
    "role": "merchant",
    "token": "token_user_1_xxx"
  }
}
```

#### æ³¨å†Œ
```
POST /api/admin/register
Content-Type: application/json

{
  "username": "newuser",
  "password": "123456",
  "phone": "13800138000",
  "role": "merchant"
}

å“åº”ï¼š
{
  "success": true,
  "data": {
    "id": "user_xxx",
    "username": "newuser",
    "role": "merchant",
    "token": "token_user_xxx"
  }
}
```

### é…’åº—ç®¡ç†æ¥å£

#### è·å–é…’åº—åˆ—è¡¨
```
GET /api/user/hotels?city=ä¸Šæµ·&star=5&page=1&size=10

å“åº”ï¼š
{
  "success": true,
  "data": {
    "list": [...],
    "total": 10,
    "currentPage": 1
  }
}
```

#### è·å–é…’åº—è¯¦æƒ…
```
GET /api/user/hotels/hotel_1

å“åº”ï¼š
{
  "success": true,
  "data": {
    "id": "hotel_1",
    "nameCN": "ä¸Šæµ·æµ¦ä¸œé¦™æ ¼é‡Œæ‹‰å¤§é…’åº—",
    ...
  }
}
```

#### åˆ›å»ºé…’åº—
```
POST /api/merchant/hotels
Content-Type: application/json

{
  "nameCN": "æ–°é…’åº—",
  "city": "ä¸Šæµ·",
  "address": "ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒº",
  "star": 5,
  "merchantId": "user_1",
  "rooms": [...]
}

å“åº”ï¼š
{
  "success": true,
  "data": {
    "id": "hotel_xxx",
    "nameCN": "æ–°é…’åº—",
    ...
  }
}
```

#### æ›´æ–°é…’åº—
```
PUT /api/merchant/hotels/hotel_1
Content-Type: application/json

{
  "nameCN": "æ›´æ–°åçš„é…’åº—å",
  "address": "æ›´æ–°åçš„åœ°å€"
}

å“åº”ï¼š
{
  "success": true,
  "data": {
    "id": "hotel_1",
    "nameCN": "æ›´æ–°åçš„é…’åº—å",
    ...
  }
}
```

#### æäº¤å®¡æ ¸
```
PATCH /api/merchant/hotels/hotel_1/submit

å“åº”ï¼š
{
  "success": true,
  "data": {
    "id": "hotel_1",
    "status": "pending",
    ...
  }
}
```

### ç®¡ç†å‘˜å®¡æ ¸æ¥å£

#### å®¡æ ¸é€šè¿‡
```
PATCH /api/admin/hotels/hotel_1/approve

å“åº”ï¼š
{
  "success": true,
  "data": {
    "id": "hotel_1",
    "status": "approved",
    ...
  }
}
```

#### å®¡æ ¸æ‹’ç»
```
PATCH /api/admin/hotels/hotel_1/reject
Content-Type: application/json

{
  "rejectReason": "ä¿¡æ¯ä¸å®Œæ•´"
}

å“åº”ï¼š
{
  "success": true,
  "data": {
    "id": "hotel_1",
    "status": "rejected",
    "rejectReason": "ä¿¡æ¯ä¸å®Œæ•´",
    ...
  }
}
```

#### ä¸‹çº¿é…’åº—
```
PATCH /api/admin/hotels/hotel_1/offline

å“åº”ï¼š
{
  "success": true,
  "data": {
    "id": "hotel_1",
    "status": "offline",
    ...
  }
}
```

#### æ¢å¤é…’åº—
```
PATCH /api/admin/hotels/hotel_1/restore

å“åº”ï¼š
{
  "success": true,
  "data": {
    "id": "hotel_1",
    "status": "approved",
    ...
  }
}
```

---

## ğŸ“Š æ•°æ®ç»“æ„è¯´æ˜

### é…’åº—çŠ¶æ€è¯´æ˜
- `draft` - è‰ç¨¿çŠ¶æ€
- `pending` - å®¡æ ¸ä¸­
- `approved` - å·²å‘å¸ƒ
- `rejected` - æœªé€šè¿‡
- `offline` - å·²ä¸‹çº¿

### é™„è¿‘ä¿¡æ¯ç±»å‹
- `scenic` - æ™¯ç‚¹
- `traffic` - äº¤é€š
- `mall` - å•†åœº

### æˆ¿å‹ä¼˜æƒ ç±»å‹
- `percent` - æŠ˜æ‰£ï¼ˆå¦‚ï¼š8è¡¨ç¤º8æŠ˜ï¼‰
- `amount` - ç«‹å‡ï¼ˆå¦‚ï¼š100è¡¨ç¤ºå‡100å…ƒï¼‰

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ•°æ®æŒä¹…åŒ–
å½“å‰ä½¿ç”¨å†…å­˜å­˜å‚¨ï¼ŒæœåŠ¡å™¨é‡å¯åæ•°æ®ä¼šé‡ç½®ã€‚å¦‚éœ€æŒä¹…åŒ–ï¼Œè¯·ï¼š
- æ¥å…¥ MongoDB æ•°æ®åº“
- æˆ–æ¥å…¥ MySQL æ•°æ®åº“

### 2. å¯†ç å®‰å…¨
å½“å‰å¯†ç ä¸ºæ˜æ–‡å­˜å‚¨ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦ï¼š
- ä½¿ç”¨ bcrypt åŠ å¯†
- å®ç° JWT è®¤è¯

### 3. ç«¯å£é…ç½®
- å‰ç«¯ï¼š3000
- åç«¯ï¼š3003
- å¦‚éœ€ä¿®æ”¹ï¼Œè¯·åŒæ­¥æ›´æ–° `src/api.js` ä¸­çš„ `API_BASE_URL`

### 4. è·¨åŸŸé—®é¢˜
å·²é…ç½® CORS æ”¯æŒï¼Œå¦‚é‡è·¨åŸŸé—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
- åç«¯ CORS é…ç½®
- å‰ç«¯ API åœ°å€é…ç½®

---

## ğŸ› å¸¸è§é—®é¢˜

### 1. åç«¯å¯åŠ¨å¤±è´¥
**é—®é¢˜ï¼š** `EADDRINUSE: address already in use`
**è§£å†³ï¼š** ä¿®æ”¹ `server/server.js` ä¸­çš„ç«¯å£å·

### 2. å‰ç«¯æ— æ³•è¿æ¥åç«¯
**é—®é¢˜ï¼š** ç½‘ç»œé”™è¯¯
**è§£å†³ï¼š** 
- æ£€æŸ¥åç«¯æ˜¯å¦å¯åŠ¨
- æ£€æŸ¥ `src/api.js` ä¸­çš„ API åœ°å€æ˜¯å¦æ­£ç¡®

### 3. ç™»å½•å¤±è´¥
**é—®é¢˜ï¼š** ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯
**è§£å†³ï¼š** ä½¿ç”¨æµ‹è¯•è´¦å·æˆ–é‡æ–°æ³¨å†Œ

### 4. æ•°æ®ä¸æ˜¾ç¤º
**é—®é¢˜ï¼š** åˆ—è¡¨ä¸ºç©º
**è§£å†³ï¼š** 
- æ£€æŸ¥åç«¯æ•°æ®æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥ API è°ƒç”¨æ˜¯å¦æˆåŠŸ

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. åç«¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. å‰ç«¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
3. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
4. ç½‘ç»œè¯·æ±‚æ˜¯å¦æˆåŠŸ

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2026-02-26)
- âœ… å®Œæˆå‰åç«¯åˆ†ç¦»æ¶æ„
- âœ… å®ç°ç”¨æˆ·è®¤è¯åŠŸèƒ½
- âœ… å®ç°é…’åº—ç®¡ç†åŠŸèƒ½
- âœ… å®ç°ç®¡ç†å‘˜å®¡æ ¸åŠŸèƒ½
- âœ… å®ç°é™„è¿‘ä¿¡æ¯ç®¡ç†
- âœ… å®ç°æˆ¿å‹ç®¡ç†
- âœ… å®Œæˆæ‰€æœ‰ API æ¥å£

---

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰
